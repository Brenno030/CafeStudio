<style>
  /* Estilo básico para modal overlay */
  .modal {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5); /* fundo escuro */
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
  }
</style>

<!-- Botão -->
<div class="d-flex justify-content-end mb-3">
  <button class="btn btn-success" onclick="abrirModal()">Adicionar</button>
</div>

<!-- Modal de Novo Prato -->
<div id="modalForm" class="modal">
  <div class="modal-content" style="width: 400px;">
    <h4 class="mb-3">Novo Prato</h4>
    <form action="/admin/<%= categoria %>/criar" method="POST" enctype="multipart/form-data">
      <div class="mb-2">
        <label>Nome:</label>
        <input type="text" name="nome" class="form-control" required />
      </div>
      <div class="mb-2">
        <label>Descrição:</label>
        <textarea name="descricao" class="form-control" required></textarea>
      </div>
      <div class="mb-2">
        <label>Preço:</label>
        <input type="number" name="preco" step="0.01" class="form-control" required />
      </div>
      <div class="mb-2">
        <label>Imagem (URL):</label>
        <input type="file" name="imagem" accept="image/*" required>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-secondary" onclick="fecharModal()">Cancelar</button>
        <button type="submit" class="btn btn-success">Salvar</button>
      </div>
    </form>
  </div>
</div>

<script>
  function abrirModal() {
    const modal = document.getElementById('modalForm');
    modal.style.display = 'flex';

    // Pega a categoria atual da página (vindo do EJS)
    const categoria = '<%= categoria %>';
    modal.querySelector('form').action = `/admin/${categoria}/criar`;
  }

  function fecharModal() {
    document.getElementById('modalForm').style.display = 'none';
  }
</script>

